<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Setup streaming camera &mdash; moilappv3.1 version3.1 documentation</title>
      <link rel="stylesheet" href="static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="static/jquery.js"></script>
        <script src="static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="static/documentation_options.js"></script>
        <script src="static/doctools.js"></script>
        <script src="static/sphinx_highlight.js"></script>
    <script src="static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Operation of MoilApp" href="operation_moilapp.html" />
    <link rel="prev" title="Getting and installing MoilApp" href="getting_installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="static/light-moilapp.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>

<style>
  h3 {
    margin-top: 0;
    margin-bottom: 0;
  }

  /* Additional styles for the form */
  select {
    width: 40%;
    padding: 6px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
  }

  input[type="submit"] {
    display: none;
  }
</style>
<br>
<!--<h3>Choice Version</h3>-->
<form id="myForm">
  <select name="cars" id="cars" onchange="redirectToPage()">
    <option value="moilapp-v1">Moilapp-V1</option>
    <option value="moilapp-v2">Moilapp-V2</option>
    <option value="moilapp-v3">Moilapp-V3</option>
    <option value="moilapp-v4.0">Moilapp-V4.0</option>
    <option value="moilapp-v4.1">Moilapp-V4.1</option>
  </select>
</form>

<script>
  function redirectToPage() {
    var selectedOption = document.getElementById("cars").value;

    switch (selectedOption) {
      case "moilapp-v1":
        window.location.href = "moilapp-v1.0/v10_index.html";
        break;
      case "moilapp-v2":
        window.location.href = "moilapp-v2.0/v20_index.html";
        break;
      case "moilapp-v3":
        window.location.href = "moilapp-v3.0/v30_index.html";
        break;
      case "moilapp-v4.0":
        window.location.href = "moilapp-v4.0/v40_index.html";
        break;
      case "moilapp-v4.1":
        window.location.href = "index.html";
        break;
    }
  }
</script>

</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="definition_overview.html">Definition and overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_installation.html">Getting and installing MoilApp</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setup streaming camera</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-os-in-your-raspberry-pi">3.1 Install OS in your raspberry-pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup-connect-to-raspberry">3.2 Setup Connect to raspberry</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a-desktop-configuration">a. Desktop configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#b-ssh-client-configuration">b. SSH Client configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#connect-to-the-camera-stream">3.3 Connect to the camera stream</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operation_moilapp.html">Operation of MoilApp</a></li>
<li class="toctree-l1"><a class="reference internal" href="add_ons_pluginApp.html">Add-ons (plugins) Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_pluginApp.html">Create your own plugins Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation_debianpkg.html">Debian package Distribution</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">moilappv3.1</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Setup streaming camera</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="setup-streaming-camera">
<h1>Setup streaming camera<a class="headerlink" href="#setup-streaming-camera" title="Permalink to this heading"></a></h1>
<section id="install-os-in-your-raspberry-pi">
<h2>3.1 Install OS in your raspberry-pi<a class="headerlink" href="#install-os-in-your-raspberry-pi" title="Permalink to this heading"></a></h2>
<p style="text-align: justify;">

 You can following this tutorial to installing operating system image in raspberry pi, visit here. Make sure you set the password when you install,
 its required when you want to access using SSH Client. </p></section>
<section id="setup-connect-to-raspberry">
<h2>3.2 Setup Connect to raspberry<a class="headerlink" href="#setup-connect-to-raspberry" title="Permalink to this heading"></a></h2>
<p style="text-align: justify;">

 There are many ways to access raspberry, you can use desktop, PuTTY or via SSH client. Here will only explain in detail for the desktop and SSH client.
 if you are interested in using putty, you can read it on internet.</p><p style="text-align: justify;">

 The latest version of raspberry has been equipped with python installation version 3.7.3. To setup the raspberry as a camera stream, you just need to download
 the code from This link. Make sure you have enable the camera interface and SSH server, if not you can follow This tutorial. </p><section id="a-desktop-configuration">
<h3>a. Desktop configuration<a class="headerlink" href="#a-desktop-configuration" title="Permalink to this heading"></a></h3>
<p style="text-align: justify;">

 Using the desktop to control a raspberry is almost the same as when you control your computer. When you want to activate camera streaming, you only need to download
 the code via terminal or directly via zip file from the link given. Then running the code using python3. </p><p style="text-align: justify;">

 After that you only need to know the IP address of the raspberry that you use to access the streaming camera. You can use command line “ifconfig” to assign an address
 to a network interface or to configure or display the current network interface configuration information.  </p></section>
<section id="b-ssh-client-configuration">
<h3>b. SSH Client configuration<a class="headerlink" href="#b-ssh-client-configuration" title="Permalink to this heading"></a></h3>
<p style="text-align: justify;">

 If you use the same internet source, you can find the IP address of raspberry using the command line “ping raspberrypi.local” like shown below this: </p><figure class="align-center" id="id1">
<a class="reference internal image-reference" href="static/19.Find_raspberry-pi_available.png"><img alt="alternate text" src="static/19.Find_raspberry-pi_available.png" style="width: 587.2px; height: 209.60000000000002px;" /></a>
<figcaption>
<p><span class="caption-text">Find raspberry-pi available</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p style="text-align: justify;">

 If raspberry is detected, then the command line will show the IP address of the device like shown in picture above. This IP will later be used to access
 raspberry using the SSH Client. To connect, you just need to use the command line: </p><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ssh<span class="w"> </span>username@Ip_adsress
</pre></div>
</div>
<p style="text-align: justify;">

 below is an example of a command line where the username is pi and the ip address is 192.168.0.69 so the SSH command line is "ssh pi@192.168.0.69".
 you just enter the password and it will be connected. </p><figure class="align-center" id="id2">
<a class="reference internal image-reference" href="static/20.Connect_to_raspberry-pi_using_SSH_client.png"><img alt="alternate text" src="static/20.Connect_to_raspberry-pi_using_SSH_client.png" style="width: 587.2px; height: 224.8px;" /></a>
<figcaption>
<p><span class="caption-text">Connect to raspberry-pi using SSH client</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p style="text-align: justify;">

 After you are connected and can control the device from your computer's command line, you need to download the server code that I have provided on GitHub.
 Run the command line on terminal “ git clone https://github.com/MoilOrg/stream_raspi.git” like showing in below. After finish cloning the code, you just need
 to run using python3 and the streaming camera is active now. </p><figure class="align-center" id="id3">
<a class="reference internal image-reference" href="static/21.Run_server_for_streaming_camera.png"><img alt="alternate text" src="static/21.Run_server_for_streaming_camera.png" style="width: 586.4px; height: 388.8px;" /></a>
<figcaption>
<p><span class="caption-text">Run server for streaming camera</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="connect-to-the-camera-stream">
<h2>3.3 Connect to the camera stream<a class="headerlink" href="#connect-to-the-camera-stream" title="Permalink to this heading"></a></h2>
<p style="text-align: justify;">

 After you run the code to enable streaming camera on the raspberry, you can access it via the link according to the IP address of the raspberry itself and add
 properties behind it. The camera streaming link format is “http://ip_address:8000/stream.mjpg”. You have to change the IP address according to the IP device you are using.
 You can open it directly from the browser or OpenCV. Some example shown in bellow this:</p><ul class="simple">
<li><p>Open camera streaming on browser</p></li>
</ul>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="static/22.Access_streaming_camera_on_web_browser.png"><img alt="alternate text" src="static/22.Access_streaming_camera_on_web_browser.png" style="width: 625.1999999999999px; height: 356.4px;" /></a>
<figcaption>
<p><span class="caption-text">Access streaming camera on web browser</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>import<span class="w"> </span>cv2
<span class="c1"># Create a VideoCapture object and read from input file</span>
<span class="c1"># If the input is the camera, pass 0 instead of the video file name</span>
<span class="nv">cap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>cv2.VideoCapture<span class="o">(</span>“link_stream_cam”<span class="o">)</span>
<span class="c1"># Check if camera opened successfully</span>
<span class="k">if</span><span class="w"> </span><span class="o">(</span>cap.isOpened<span class="o">()==</span><span class="w"> </span>False<span class="o">)</span>:
print<span class="w"> </span><span class="o">(</span><span class="s2">&quot;Error opening video stream or file&quot;</span><span class="o">)</span>
<span class="c1"># Read until video is completed</span>
<span class="k">while</span><span class="o">(</span>cap.isOpened<span class="o">())</span>:
<span class="c1"># Capture frame-by-frame</span>
ret,<span class="w"> </span><span class="nv">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>cap.read<span class="o">()</span>
<span class="k">if</span><span class="w"> </span><span class="nv">ret</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>True:
<span class="c1"># Display the resulting frame</span>
cv2.imshow<span class="o">(</span><span class="s1">&#39;Frame&#39;</span>,frame<span class="o">)</span>
<span class="c1"># Press Q on keyboard to exit</span>
<span class="k">if</span><span class="w"> </span>cv2.waitKey<span class="o">(</span><span class="m">25</span><span class="o">)</span><span class="w"> </span><span class="p">&amp;</span><span class="w"> </span><span class="nv">0xFF</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>ord<span class="o">(</span><span class="s1">&#39;q&#39;</span><span class="o">)</span>:
<span class="k">break</span>
<span class="c1"># Break the loop</span>
<span class="k">else</span>:
<span class="k">break</span>
<span class="c1"># When everything done, release the video capture object</span>
cap.release<span class="o">()</span>
<span class="c1"># Closes all the frames</span>
cv2.destroyAllWindows<span class="o">()</span>
</pre></div>
</div>
<p>when you execute, you will get result like bellow this.</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="static/23.Open_streaming_camera_using_OpenCV_python.png"><img alt="alternate text" src="static/23.Open_streaming_camera_using_OpenCV_python.png" style="width: 601.5px; height: 489.0px;" /></a>
<figcaption>
<p><span class="caption-text">Open streaming camera using OpenCV python</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="getting_installation.html" class="btn btn-neutral float-left" title="Getting and installing MoilApp" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="operation_moilapp.html" class="btn btn-neutral float-right" title="Operation of MoilApp" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Perseverance Technology, Taiwan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>